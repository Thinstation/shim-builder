# Description: The GNU troff text-formatting system
# URL: https://www.gnu.org/software/groff/groff.html
# Maintainer: CRUX System Team, core-ports at crux dot nu

name=groff
version=1.23.0
release=1
source=(https://ftpmirror.gnu.org/gnu/$name/$name-$version.tar.gz)

build() {
	cd $name-$version

	./configure \
		--prefix=/usr \
		--sysconfdir=/etc \
		--without-x

	make
	make DESTDIR=$PKG install

	sed -e 's|^\(papersize\).*|\1 /etc/papersize|' \
		-i $PKG/usr/share/groff/current/font/*/DESC

	install -d $PKG/etc
	echo 'letter' > $PKG/etc/papersize

	rm -rf $PKG/usr/share/{info,doc}

	ln -s eqn $PKG/usr/bin/geqn
	ln -s tbl $PKG/usr/bin/gtbl
	ln -s soelim $PKG/usr/bin/zsoelim
}
