# Description: Perl Compatible Regular Expressions
# URL: https://www.pcre.org
# Maintainer: CRUX System Team, core-ports at crux dot nu

name=libpcre2
version=10.42
project=pcre2
release=1
source=(https://github.com/PhilipHazel/pcre2/releases/download/pcre2-$version/pcre2-$version.tar.gz)

build() {
	cd pcre2-$version

	./configure \
		--prefix=/usr \
		--enable-jit \
		--enable-pcre2-16 \
		--enable-pcre2-32

	make
	make DESTDIR=$PKG install

	install -d $PKG/lib
	mv $PKG/usr/lib/libpcre2-8.so.* $PKG/lib
	ln -sf ../../lib/$(readlink $PKG/usr/lib/libpcre2-8.so) $PKG/usr/lib/libpcre2-8.so

	rm -r $PKG/usr/share/doc
}
